<launch>



<include file ="$(find raspbot_description)/launch/static.launch"/>


<node name="diff_tf" pkg="differential_drive" type="diff_tf.py" output="screen"/>


<node name="twist_to_motors" pkg="differential_drive" type="twist_to_motors.py" output="screen"/>


<node name="wheel_loopback" pkg="differential_drive" type="wheel_loopback.py" output="screen"/>


<node name="wheel_scaler" pkg="differential_drive" type="wheel_scaler.py" output="screen"/>

<param name="robot_description" command="cat $(find raspbot_description)/urdf/raspbot.urdf" />



 <!-- Publish TF with robot_state_publisher -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"
    respawn="false" output="screen">
    <remap from="/joint_states" to="/gypsy/joint_states" />
  </node>

 


<node name="lpid_velocity" pkg="differential_drive" type="pid_velocity.py" output="screen">
      	<remap from="wheel" to="lwheel"/>
      	<remap from="motor_cmd" to="left_wheel_speed"/>
     	<remap from="wheel_vtarget" to="lwheel_vtarget"/>
      	<remap from="wheel_vel" to="lwheel_vel"/>
    
      	<rosparam param="Kp">20</rosparam>
      	<rosparam param="Ki">20</rosparam>
      	<rosparam param="Kd">0</rosparam>
      	<rosparam param="out_min">-150</rosparam>
      	<rosparam param="out_max">150</rosparam>
      	<rosparam param="rate">30</rosparam>
      	<rosparam param="timeout_ticks">4</rosparam>
     	<rosparam param="rolling_pts">5</rosparam>

  </node>

  <node name="rpid_velocity" pkg="differential_drive" type="pid_velocity.py" output="screen">
      <remap from="wheel" to="rwheel"/>
      <remap from="motor_cmd" to="right_wheel_speed"/>
      <remap from="wheel_vtarget" to="rwheel_vtarget"/>
      <remap from="wheel_vel" to="rwheel_vel"/>
      <rosparam param="Kp">20</rosparam>
      <rosparam param="Ki">20</rosparam>
      <rosparam param="Kd">0</rosparam>
      <rosparam param="out_min">-150</rosparam>
      <rosparam param="out_max">150</rosparam>
      <rosparam param="rate">30</rosparam>
      <rosparam param="timeout_ticks">4</rosparam>
      <rosparam param="rolling_pts">5</rosparam>
</node>
</launch>

